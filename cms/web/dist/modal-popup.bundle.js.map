{"version":3,"file":"modal-popup.bundle.js","sources":["webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./src/js/block-modules/ModalPopup.js"],"sourcesContent":["'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","class ModalPopup {\r\n    static selector = '.section-modal_popup[data-modal-popup]';\r\n\r\n    constructor() {\r\n        this.instances = [];\r\n        this.anchors = [];\r\n    }\r\n\r\n    async init() {\r\n        let elements = $(ModalPopup.selector);\r\n        if (elements.length) {\r\n            elements.each((index, element) => {\r\n                this.instances.push(element);\r\n                this.anchors.push('a[href=\"#' + element.getAttribute('data-modal-popup') + '\"]'); // assemble list of anchor selectors, which we'll use to attach event listeners to anchor links\r\n            });\r\n\r\n            // open popup with same attribute value on click\r\n            $('body').on('click.bws-modal-popup', '[data-modal-popup-trigger]', function (e) {\r\n                let targetModalName = $(this).data('modal-popup-trigger');\r\n                let targetModal = $('[data-modal-popup=\"' + targetModalName + '\"]');\r\n                if (targetModal.length) {\r\n                    e.preventDefault();\r\n                    targetModal.addClass('active');\r\n                }\r\n            });\r\n\r\n            // open popup with matching anchor link handle on click\r\n            $('body').on('click.bws-modal-popup', this.anchors.join(', '), function(e) {\r\n                let target = $(e.target);\r\n                let targetModalName = target.attr('href').substring(1);\r\n                let targetModal = $('[data-modal-popup=\"' + targetModalName + '\"]');\r\n                if (targetModal.length) {\r\n                    e.preventDefault();\r\n                    targetModal.addClass('active');\r\n                }\r\n            });\r\n\r\n            // close popups on click outside content area or on close button\r\n            $('body').on('click.bws-modal-popup', '.modal-popup[data-modal-popup]', function (e) {\r\n                let $target = $(e.target);\r\n                if ($(this).is('.active') && ($target.is('[data-close-popup]') || !$target.closest('.popup-container').length)) {\r\n                    e.preventDefault();\r\n                    $(this).removeClass('active');\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        if (this.instances.length) {\r\n            $('body').off('click.bws-modal-popup');\r\n            this.instances = [];\r\n            this.anchors = [];\r\n        }\r\n    }\r\n}\r\n\r\nexport default ModalPopup;"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAGA;AAUA;AAWA;;;;;A","sourceRoot":""}