{# Points Table List Block #}
{% set block_type = "points_table_list" %}

{# Block variable defaults #}
{% set heading = block['heading'] is defined ? block.heading : '' %}
{% set subheading = block['subheading'] is defined ? block.subheading : '' %}
{% set sectionType = block['sectionType'] is defined ? block.sectionType : 'standard' %}
{% set tableItems = block.children is defined ? block.children|filter(item => item.type.handle == 'points_table') : null %}

<section class="section section--medium section--whitespace section-{{ block_type }}--block section--{{ sectionType }} animatable">
    <div class="container">
        {% if subheading|length %}
            <p class="subtitle--heading">{{ subheading }}</p>
        {% endif %}
        {% if heading|length %}
            <h2 class="primary--heading">{{ heading }}</h2>
        {% endif %}

        {% if tableItems|length %}
        <div class="point-tables">        
        {% for table in tableItems %}
            {% set tableIcon = table.icon|length ? table.icon : 'fas fa-paste' %}
            {% set tableHeading = table.heading|length ? table.heading : '' %}
            {% set rowHeading = table.subheading|length ? table.subheading : 'Activity' %}
            {% set tableTerms = table.rtfContent|length ? table.rtfContent : '' %}

            <div class="point-table grid-x grid-margin-x">
                <div class="table-heading cell large-2 medium-3 small-12">
                    <div class="icon-container">
                        {% if tableIcon|length %}<div class="icon-circle"><span class="icon {{ tableIcon }}"></span></div>{% endif %}
                        {% if tableHeading|length %}<div class="table-heading">{{ tableHeading }}</div>{% endif %}
                    </div>
                </div>
                <div class="table-content cell large-10 medium-9 small-12">
                    <div class="table-row heading-row">
                        <div class="row-description rte"><span class="column-heading">{{ rowHeading }}</span></div>
                        <div class="row-value"><span class="column-heading">Points</span></div>                    
                    </div>

                    {% for row in table.children.all() %}
                        {% set rowDescription = row.rtfContent|length ? row.rtfContent : '' %}
                        {% set rowValue = row.heading|length ? row.heading : '' %}
                        <div class="table-row">
                            <div class="row-description rte">{{ rowDescription }}</div>
                            <div class="row-value">{{ rowValue }}</div>                    
                        </div>
                    {% endfor %}

                    {% if tableTerms|length %}
                      <div class="table-row terms-row">
                        <div class="row-description rte">{{ tableTerms }}</div>
                      </div>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
        </div>
        {% endif %}
    </div>
</section>
